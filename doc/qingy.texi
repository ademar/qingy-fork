\input texinfo   @c -*-texinfo-*-
@comment $Id$
@comment %**start of header
@setfilename qingy.info
@include version.texi
@settitle Qingy @value{VERSION}
@syncodeindex pg cp
@comment %**end of header
@copying
This manual is for Qingy
(version @value{VERSION}, @value{UPDATED}),
which is a frame-buffered getty substitute

Copyright @copyright{} 2003 Paolo Gianrossi

@quotation
Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.2
or any later version published by the Free Software Foundation;
with no Invariant Sections, no Front-Cover Texts, and no Back-Cover
Texts.  A copy of the license is included in the section entitled "GNU
Free Documentation License".
@end quotation
@end copying

@dircategory System programs
@direntry
* qingy: (qingy)Invoking qingy.    
@end direntry

@titlepage
@title Qingy user manual
@subtitle for version @value{VERSION}, @value{UPDATED}
@author Paolo Gianrossi (@email{paolino.gnu@@disi.unige.it})
@page
@vskip 0pt plus 1filll
@insertcopying
@end titlepage

@contents

@ifnottex
@node Top, Introduction, (dir), (dir)
@top Qingy

@insertcopying
@end ifnottex

@menu
* Introduction::                
* Fetching qingy::              
* Configuration ::              
* The settings file::
* Qingy Themes::
* The welcomes feature::        
* Using Qingy::                 
* Copying Qingy::               
* Copying::
* GNU Free Documentation License::
* Index::                       

@detailmenu
 --- The Detailed Node Listing ---

Fetching qingy

* Installing from the tarball::  

Configuration 

* Line options::                

@end detailmenu
@end menu

@node  Introduction, Fetching qingy, Top, Top
@comment  node-name,  next,  previous,  up
@chapter Introduction

@cindex eye-candy

Qingy Is Not GettY. 
Qingy is useless anyway: it is just eye-candy for a login screen on
your box.  Still, it's just plain lovely and cool, and we are sure
that you will love it.

Qingy graphical effects are obtained perusing the framebuffer, thus
avoiding the nuisance of running an X server just to login as it
happens with the various *DMs. Also, it has some nice features, such
as text sessions as well as X sessions, a screensaver, themes to
customize it totally and much much more.

@node  Fetching qingy, Configuration , Introduction, Top
@chapter Fetching qingy

You can download the latest stable version of Qingy from SourceForge
(@uref{http://qingy.sourceforge.net}). You should get the latest
stable version, unless you are a developer or really brave: in those
cases, you might want to get the CVS version. This is the bleeding
edge version, the one we are using everyday for our small and big
changes in the code. It might even not compile (although we really try
to avoid that) and it is totally unsopported. To get this version you
will need a CVS client. You should read the huge and very deep
SourceForge CVS documentation, but something like @kbd{cvs
-d:pserver:anonymous@@cvs.sf.net:/cvsroot/qingy co qingy} might do the
trick.

Also, if you are using Gentoo as your GNU/Linux distribution, you can
@kbd{emerge qingy}.

@menu
* Installing from the tarball::  
@end menu
@node  Installing from the tarball,  , Fetching qingy, Fetching qingy
@comment  node-name,  next,  previous,  up
@section Installing from the tarball

@cindex installing
@cindex tarball
@cindex Linux

Before starting to compile qingy, you should check to have the
DirectFB library installed. You should also configure DirectFB for
your framebuffer device: run @kbd{fbset} and paste the output as the
first entry in /etc/fb.modes. 

Fetch the tarball and compile it more or less as any Linux package:
@enumerate
@item
@kbd{tar -xvzf qingy-@value{VERSION}.tar.gz}
@item
@kbd{cd qingy-@value{VERSION}}
@item
@kbd{./configure}
@item
@kbd{make}
@item
@kbd{make install}
@end enumerate

After that, you should check @file{/etc/directfbrc.qingy} (which
should have been created by Qingy itself). It should have this line in it:
@code{mode=1024x768} (change this with the actual value you got from fbset).
If for some reason you don't have such file or it does contain the
wrong stuff, please correct this manually.

Finally, you should change your @file{/etc/inittab} file from something like

@verbatim

#
# ... more stuff here 

# TERMINALS

c1:12345:respawn:/sbin/agetty 38400 tty1 linux
c2:12345:respawn:/sbin/agetty 38400 tty2 linux
c3:12345:respawn:/sbin/agetty 38400 tty3 linux
c4:12345:respawn:/sbin/agetty 38400 tty4 linux
c5:12345:respawn:/sbin/agetty 38400 tty5 linux
c6:12345:respawn:/sbin/agetty 38400 tty6 linux

# and more stuff following ...

# End of /etc/inittab
@end verbatim

to something like 

@verbatim

#
# ... more stuff here 

# TERMINALS

c1:12345:respawn:/sbin/qingy tty1  --black-screen-workaround --no-shutdown-screen
c2:12345:respawn:/sbin/qingy tty2  --black-screen-workaround --no-shutdown-screen
c3:12345:respawn:/sbin/qingy tty3  --black-screen-workaround --no-shutdown-screen
c4:12345:respawn:/sbin/agetty 38400 tty4 linux

# and more stuff following ...

# End of /etc/inittab
@end verbatim

Please note that we left a terminal (tty4) set to the old getty. This
is because Qingy is still at beta release. Thus, if something goes
wrong, this way you'll still have a way to login on your system.

Note also that we passed some options to Qingy. @c @xref{Line options}
, to see what options are available and what they do.


At this point you're ready to launch Qingy. From a shell prompt type
@kbd{init Q} and then @kbd{killall -9 agetty} (or whatever getty you
use). Logout and find Qingy running as the login manager now on the
terminals you've set for it.

@node  Configuration , The welcomes feature, Fetching qingy, Top
@comment  node-name,  next,  previous,  up
@chapter Configuration 
Qingy is very customizable, making it possible to have almost exactly
the behaviour you want it to have. Configuration is done site-widely
and breaks down to basically two aspects: ``What it looks like'', and
``What happens when I do something''. Of course, you cannot have a
user-based configuration, as when you have Qingy running, you don't
know yet which user is sitting in front of it.

Customization is obtained in three different ways: through line
options, through the @file{/etc/qingy/settings} file and through themes.

@menu
* Line options::                
@end menu

@node  Line options,  , Configuration , Configuration
@comment  node-name,  next,  previous,  up
@section Line options

When Qingy is called by init, it is passed some options. These options
change some of Qingy behaviour in different ways. Here is a list of all possible options.

@table @code
@item --fb-device <device>
	Use <device> as framebuffer device.

@item --hide-password
	Do not show password asterisks.

@item --hide-lastuser
	Do not display last user name.

@item --disable-lastuser
	Do not remember last user name.

@item --verbose
	Display some diagnostic messages on stderr.

@item --no-shutdown-screen
	Close DirectFB mode before shutting down.
	This way you will see system shutdown messages.

@item --screensaver <timeout>
	Activate screensaver after <timeout> minutes (default is 5).
	A value of 0 disables screensaver completely.

@item --black-screen-workaround
	Try this if you get a black screen instead of a text console.
	Note: switching to another vt and back also solves the problem.

@end table

@include Settings.texi

@include Themes.texi

@node  The welcomes feature, Using Qingy, Configuration , Top
@comment  node-name,  next,  previous,  up
@chapter The welcomes feature

The welcomes feature in Qingy is just the natural evolution of the
``Greetings master!'' feature for root: basically it lets you define
for each user the welcome message to display. To do this, create file
@file{/etc/qingy/welcomes} and insert, one on each line, the username,
a space and just whatever you want to display. For example:

@example
paolino The answer is 42!
michele Ah! What a lovely day, my Author...
root    It's not funny...Why do you wanna log like that!?
@end example

will display @samp{The answer is 42} when I (paolino) log in, and so on (you got the point).

@emph{Note: this is still a quick hack... It will be most probably
changed (in better, hopefully) in next releases... :)}


@node  Using Qingy, Copying Qingy, The welcomes feature, Top
@comment  node-name,  next,  previous,  up
@chapter Using Qingy

Qingy has a very intuitive interface, so you should be able to use it
properly since the first time.

On your screen, you might have different widgets, due to theme and
configuration, but what you will always find are the login field, the
password field and the Sessions box. In the text fields, you can edit
normally using your keyboard. Arrows will move in the text.

@node  Copying Qingy, Index, Using Qingy, Top
@comment  node-name,  next,  previous,  up
@appendix Copying This Manual and Qingy

Qingy is Free Software. That means that you can freely use, copy,
modify Qingy. You don't even have to tell us if you do so. But if you
do, you have to let others have the same rights you do. For this
reason, Qingy comes under the GNU General Public
License. @xref{Copying}, for a copy of this License. You should read
the license before you do anything with Qingy.

Free Software needs Free Documentation. This is a Free manual.

It would be useless to have a piece of Free Software without
appropriate documentation. This documentation must, of course, be
Free. That is, you may use, copy and modify it. You can actually use,
copy, even print and publish for money, even write again whole parts
of it. You don't even have to tell us this. But you must permit others
to do the same. This manual is published under the GNU Free
Documentation License. @xref{GNU Free Documentation License}, for a
copy of this License. Before you do anything with this manual, except
maybe reading it, you should read the license.

@include gpl.texi

@include fdl.texi

@node Index,  , Copying Qingy, Top
@unnumbered Index

@printindex cp

@bye

